# GH action that builds the code and runs the tests on every PR to main or dev branch
# This is a basic example, you can add more steps to run linters, security checks, etc.
# Rodrigo Nunez, Apr 2024
name: Build code and run tests

on: push

jobs:
  run-build-and-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Build code
        run: |
          npm install
          npm run build
      - name: Start app
        run: npm run start
      - name: Wait for app to start
        run: sleep 30
      - name: Run tests against running app
        run: |
          npx playwright install
          npm run safetest
